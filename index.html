<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cyber Relics</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* Palette */
            --bg-body: #050508;
            --bg-card: #13131f;
            --bg-glass: rgba(19, 19, 31, 0.85);
            --primary: #00f3ff;
            --secondary: #bc13fe;
            --accent: #ff003c;
            --text-main: #ffffff;
            --text-muted: #7d8ca3;
            --gold: #ffaa00;
            
            /* Dimensions */
            --nav-height: 75px;
            --header-height: 60px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Prevent body scroll, handle inside views */
            height: 100vh;
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(0, 243, 255, 0.1) 0%, transparent 50%),
                linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(188, 19, 254, 0.05) 100%);
        }

        /* --- UTILS --- */
        .cyber-font { font-family: 'Orbitron', sans-serif; }
        .text-gradient { background: linear-gradient(90deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hidden { display: none !important; }
        .btn { border: none; outline: none; cursor: pointer; transition: 0.2s; }
        
        /* --- LAYOUT --- */
        #app {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* --- HEADER --- */
        header {
            height: var(--header-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            z-index: 100;
        }

        .header-left { display: flex; align-items: center; gap: 10px; }
        .app-logo { font-size: 20px; font-weight: 900; letter-spacing: 1px; color: var(--text-main); }
        .header-balance {
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            display: flex; align-items: center; gap: 5px;
        }
        .user-avatar-small {
            width: 32px; height: 32px; border-radius: 50%;
            border: 2px solid var(--secondary);
        }

        /* --- SCROLLABLE CONTENT AREA --- */
        .content-view {
            flex: 1;
            overflow-y: auto;
            padding-bottom: calc(var(--nav-height) + 20px);
            opacity: 0;
            animation: fadeIn 0.3s forwards;
            display: none; /* Controlled by JS */
        }
        .content-view.active { display: block; }

        @keyframes fadeIn { to { opacity: 1; } }

        /* --- NAVIGATION --- */
        .bottom-nav {
            height: var(--nav-height);
            background: #0a0a10;
            border-top: 1px solid rgba(255,255,255,0.05);
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: fixed;
            bottom: 0; width: 100%;
            z-index: 100;
            padding-bottom: 10px; /* Safe area */
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-muted);
            font-size: 10px;
            width: 20%;
        }

        .nav-icon { font-size: 20px; transition: 0.2s; }
        .nav-item.active { color: var(--primary); }
        .nav-item.active .nav-icon { transform: translateY(-3px); text-shadow: 0 0 10px var(--primary); }
        
        /* Central BIG button */
        .nav-item.center-btn .nav-icon-wrapper {
            width: 50px; height: 50px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.4);
            margin-bottom: -20px;
            border: 4px solid var(--bg-body);
        }
        .nav-item.center-btn .nav-icon { color: #000; font-size: 24px; }

        /* --- VIEW: CASES (HOME) --- */
        .hero-banner {
            position: relative;
            height: 380px;
            background: url('https://img.freepik.com/free-photo/futuristic-city-with-neon-lights_23-2149089862.jpg') center/cover;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .hero-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(to bottom, rgba(5,5,8,0.2), var(--bg-body));
        }
        .hero-content { position: relative; z-index: 2; width: 100%; padding: 0 20px; }
        
        .timer-badge {
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            padding: 8px 16px;
            border-radius: 12px;
            display: inline-flex;
            gap: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .timer-part { display: flex; flex-direction: column; }
        .timer-num { font-weight: 700; font-size: 16px; font-family: 'Orbitron'; }
        .timer-label { font-size: 9px; color: var(--text-muted); text-transform: uppercase; }

        .season-title {
            font-size: 36px; line-height: 1; margin-bottom: 20px;
            text-transform: uppercase; text-shadow: 0 0 20px var(--primary);
        }

        .btn-main {
            background: linear-gradient(90deg, #0066ff, var(--primary));
            padding: 14px 0; width: 100%; border-radius: 12px;
            font-weight: 700; color: #000; font-family: 'Orbitron';
            text-transform: uppercase;
            box-shadow: 0 5px 20px rgba(0, 243, 255, 0.3);
        }

        .premium-block {
            margin-top: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            text-align: left;
        }
        .progress-bar {
            height: 8px; background: #222; border-radius: 4px; margin-top: 10px; overflow: hidden;
        }
        .progress-fill { height: 100%; background: var(--primary); width: 60%; }

        .cases-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 16px;
        }
        .case-card {
            background: var(--bg-card); border-radius: 16px; padding: 12px;
            text-align: center; position: relative; border: 1px solid rgba(255,255,255,0.05);
        }
        .case-img { width: 80%; height: auto; filter: drop-shadow(0 0 10px rgba(188,19,254,0.3)); }
        .case-price {
            margin-top: 10px; background: rgba(255,255,255,0.1); padding: 6px; border-radius: 8px; font-size: 12px; font-weight: 700;
        }

        /* --- VIEW: UPGRADE --- */
        .upgrade-circle {
            width: 200px; height: 200px;
            margin: 40px auto;
            border-radius: 50%;
            background: radial-gradient(circle, #1a1a2e 40%, #000 100%);
            border: 2px solid #222;
            position: relative;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .upgrade-circle::before {
            content: ''; position: absolute; inset: -5px; border-radius: 50%;
            border: 2px solid var(--accent); border-top-color: transparent; border-left-color: transparent;
            animation: spin 3s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .upgrade-icon { font-size: 60px; color: #333; }
        .multipliers {
            display: flex; justify-content: center; gap: 8px; padding: 0 16px; margin-top: 20px;
        }
        .mult-btn {
            background: #111; border: 1px solid #333; color: #555;
            padding: 10px 16px; border-radius: 8px; font-weight: 600; font-family: 'Orbitron';
        }
        .mult-btn.active { border-color: var(--accent); color: var(--accent); background: rgba(255,0,60,0.1); }

        /* --- VIEW: CRAFT --- */
        .craft-grid {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; padding: 16px;
        }
        .craft-slot {
            aspect-ratio: 1; background: #111; border: 1px dashed #333; border-radius: 8px;
            display: flex; align-items: center; justify-content: center; font-family: 'Orbitron'; color: #333; font-size: 18px;
        }
        .craft-info {
            background: var(--bg-card); margin: 16px; padding: 20px; border-radius: 16px; text-align: center; border: 1px solid #333;
        }

        /* --- VIEW: PROFILE --- */
        .profile-header {
            text-align: center; padding: 30px 0;
            background: radial-gradient(circle at center, rgba(188, 19, 254, 0.1), transparent 70%);
        }
        .profile-avatar-xl {
            width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--accent);
            box-shadow: 0 0 20px var(--accent); margin-bottom: 10px;
        }
        .stats-row {
            display: flex; justify-content: center; gap: 15px; margin-top: 10px; padding: 0 16px;
        }
        .stat-badge {
            background: rgba(0,0,0,0.5); border: 1px solid #333; padding: 8px 12px; border-radius: 8px; font-size: 11px;
            display: flex; flex-direction: column; align-items: center; min-width: 100px;
        }
        .inventory-empty {
            text-align: center; padding: 40px 20px; color: var(--text-muted);
        }
        .inventory-empty img { width: 120px; opacity: 0.5; margin-bottom: 20px; }

        /* --- VIEW: FRIENDS --- */
        .friends-container {
            text-align: center; padding: 20px;
        }
        .invite-card {
            background: var(--bg-card); border-radius: 16px; padding: 20px; margin-top: 20px;
            border: 1px solid rgba(0, 243, 255, 0.1);
        }
        .btn-invite {
            background: var(--primary); color: #000; width: 100%; padding: 12px; border-radius: 8px; font-weight: 700; margin-bottom: 10px;
        }
        .friend-char {
            width: 200px; margin: 20px auto; display: block; filter: drop-shadow(0 0 10px rgba(0,255,0,0.2));
        }

    </style>
</head>
<body>

<div id="app">
    <header>
        <div class="header-left">
            <i class="fa-solid fa-bars" style="font-size: 20px;"></i>
            <div class="app-logo"><span style="color:var(--secondary)">Cyber</span>Relics</div>
        </div>
        <div class="header-left">
            <div class="header-balance">
                <i class="fa-solid fa-microchip" style="color: var(--gold);"></i> 
                <span id="header-balance-val">22</span>
                <div style="background:var(--primary); width:16px; height:16px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#000; font-size:10px;">+</div>
            </div>
            <img id="header-avatar" src="https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png" class="user-avatar-small" onclick="switchTab('profile')">
        </div>
    </header>

    <div id="main-container">
        
        <div id="view-upgrade" class="content-view">
            <div style="padding: 16px; display: flex; justify-content: space-between; align-items: center;">
                <button class="btn" style="color:var(--text-muted)"><i class="fa-solid fa-chevron-left"></i></button>
                <h2 class="cyber-font">AUGMENT NFT</h2>
                <div style="width:20px;"></div>
            </div>

            <div class="upgrade-circle">
                <i class="fa-solid fa-robot upgrade-icon"></i>
            </div>

            <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 30px;">
                <div style="background:#111; width:80px; height:80px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:30px; color:#333;">?</div>
                <i class="fa-solid fa-angles-right" style="color:var(--text-muted)"></i>
                <div style="background:#111; width:80px; height:80px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:30px; color:#333;">?</div>
            </div>

            <div style="padding: 0 16px;">
                <button class="btn btn-main" style="background: #222; color: #fff; border: 1px solid #444; margin-bottom: 20px;">
                    Make Augment <i class="fa-solid fa-angles-up"></i>
                </button>
            </div>

            <div class="multipliers">
                <div class="btn mult-btn">x2</div>
                <div class="btn mult-btn active">x5</div>
                <div class="btn mult-btn">x10</div>
                <div class="btn mult-btn">x25</div>
                <div class="btn mult-btn">x50</div>
            </div>
        </div>

        <div id="view-crafts" class="content-view">
            <div style="padding: 16px; text-align: center;">
                <h2 class="cyber-font">SYNTHESIS</h2>
            </div>
            
            <div class="craft-grid">
                <div class="craft-slot">1</div>
                <div class="craft-slot">2</div>
                <div class="craft-slot">3</div>
                <div class="craft-slot">4</div>
                <div class="craft-slot">5</div>
                <div class="craft-slot">6</div>
                <div class="craft-slot">7</div>
                <div class="craft-slot">8</div>
                <div class="craft-slot">9</div>
                <div class="craft-slot">10</div>
            </div>

            <div class="craft-info">
                <div style="font-size: 24px; color: var(--gold); margin-bottom: 5px;">‚≠ê 0</div>
                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 15px;">Cost of your materials</div>
                <div style="background: rgba(255,0,0,0.1); color: var(--accent); padding: 10px; border-radius: 8px; font-size: 12px;">
                    <i class="fa-solid fa-circle-exclamation"></i> Need 3 more items
                </div>
            </div>
            
            <div style="padding: 0 16px;">
                <button class="btn btn-main" style="background: var(--bg-card); border: 1px solid var(--text-muted);">Add User Item</button>
            </div>
        </div>

        <div id="view-cases" class="content-view active">
            <div class="hero-banner">
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <div class="timer-badge">
                        <div class="timer-part"><span class="timer-num">10</span><span class="timer-label">DAYS</span></div>
                        <div style="font-weight:700">:</div>
                        <div class="timer-part"><span class="timer-num">09</span><span class="timer-label">HRS</span></div>
                        <div style="font-weight:700">:</div>
                        <div class="timer-part"><span class="timer-num">57</span><span class="timer-label">MIN</span></div>
                    </div>
                    
                    <h1 class="season-title cyber-font">CYBER<br>SEASON</h1>
                    
                    <button class="btn btn-main" onclick="alert('Going to event...')">Access Protocol</button>

                    <div class="premium-block">
                        <div style="display:flex; justify-content:space-between; font-size:12px; font-weight:700; margin-bottom:5px;">
                            <span>ENERGY</span>
                            <span>100/100</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill"></div></div>
                        <div style="margin-top: 10px; font-size: 11px; color: #aaa;">
                            Purchase Premium Pass to unlock tier 5 instantly.
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-title" style="padding: 20px 16px 5px; font-size: 12px; color: var(--text-muted); text-transform: uppercase;">Archives</div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div style="position:absolute; top:10px; right:0; background:var(--primary); color:#000; font-size:9px; padding:2px 6px; border-radius:4px 0 0 4px; font-weight:bold;">+20% XP</div>
                    <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png" class="case-img" style="filter: hue-rotate(180deg);" alt="Deer">
                    <div class="cyber-font" style="font-size:12px; margin-top:5px;">Neon Ghost</div>
                    <div class="case-price"><i class="fa-solid fa-microchip" style="color:var(--gold)"></i> 250</div>
                </div>
                <div class="case-card">
                     <div style="position:absolute; top:10px; right:0; background:var(--secondary); color:#fff; font-size:9px; padding:2px 6px; border-radius:4px 0 0 4px; font-weight:bold;">+30% XP</div>
                    <img src="https://cdn-icons-png.flaticon.com/512/644/644667.png" class="case-img" style="filter: hue-rotate(-50deg);" alt="Shard">
                    <div class="cyber-font" style="font-size:12px; margin-top:5px;">Astral Shard</div>
                    <div class="case-price"><i class="fa-solid fa-microchip" style="color:var(--gold)"></i> 301</div>
                </div>
                <div class="case-card">
                    <img src="https://cdn-icons-png.flaticon.com/512/2640/2640742.png" class="case-img" alt="Box">
                    <div class="cyber-font" style="font-size:12px; margin-top:5px;">Data Cache</div>
                    <div class="case-price"><i class="fa-solid fa-microchip" style="color:var(--gold)"></i> 100</div>
                </div>
                <div class="case-card">
                    <img src="https://cdn-icons-png.flaticon.com/512/9626/9626643.png" class="case-img" alt="Rare">
                    <div class="cyber-font" style="font-size:12px; margin-top:5px;">System Core</div>
                    <div class="case-price"><i class="fa-solid fa-microchip" style="color:var(--gold)"></i> 1500</div>
                </div>
            </div>
        </div>

        <div id="view-contests" class="content-view">
             <div style="height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center;">
                <h2 style="font-size: 24px; margin-bottom: 20px;">Join Global Raids</h2>
                <div style="background: linear-gradient(90deg, var(--secondary), var(--primary)); padding: 5px 15px; border-radius: 8px; font-weight: bold; margin-bottom: 30px;">CyberBattle</div>
                <div style="color: var(--text-muted); font-size: 14px;"><i class="fa-solid fa-spinner fa-spin"></i> Loading data nodes...</div>
             </div>
        </div>

        <div id="view-friends" class="content-view">
            <div class="friends-container">
                <h2 style="margin-bottom: 10px;">Network Expansion</h2>
                <p style="color: var(--text-muted); font-size: 13px;">Invite other runners. Earn data chips and secure rewards.</p>
                
                <img src="https://cdn-icons-png.flaticon.com/512/1684/1684060.png" class="friend-char" alt="Ninja">

                <div class="invite-card">
                    <button class="btn btn-invite"><i class="fa-solid fa-user-plus"></i> Invite Runner</button>
                    <div style="color: var(--text-muted); font-size: 12px; margin-top: 10px;">
                        <i class="fa-regular fa-copy"></i> Copy uplink code
                    </div>
                </div>
            </div>
        </div>

        <div id="view-profile" class="content-view">
            <div class="profile-header">
                <img id="profile-avatar-big" src="" class="profile-avatar-xl">
                <h2 id="profile-name" class="cyber-font">User</h2>
                <div id="profile-id" style="font-size: 10px; color: var(--text-muted);">ID: 000000</div>
            </div>

            <div class="stats-row">
                <div class="stat-badge">
                    <div style="font-size: 9px; color: var(--text-muted); margin-bottom: 4px;">BEST DROP</div>
                    <img src="https://cdn-icons-png.flaticon.com/512/2640/2640742.png" style="width: 30px; margin-bottom: 4px;">
                    <div style="color: var(--gold); font-weight: 700;">329</div>
                </div>
                <div class="stat-badge">
                    <div style="font-size: 9px; color: var(--text-muted); margin-bottom: 4px;">BEST CASE</div>
                    <img src="https://cdn-icons-png.flaticon.com/512/9626/9626643.png" style="width: 30px; margin-bottom: 4px;">
                    <div style="color: #fff; font-size: 10px;">Swiss Watch</div>
                </div>
            </div>
            
            <div style="margin: 20px 16px; background: var(--bg-card); border-radius: 12px; padding: 15px; display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <div style="font-size: 11px; color: var(--text-muted);">Balance</div>
                    <div style="font-size: 18px; font-weight: 700;"> <i class="fa-solid fa-microchip" style="color:var(--gold)"></i> 22</div>
                </div>
                <button class="btn" style="background: var(--primary); color: #000; padding: 8px 16px; border-radius: 8px; font-weight: 700; font-size: 12px;">Deposit</button>
            </div>

            <div style="margin: 0 16px;">
                <div style="display: flex; justify-content: space-between; align-items: center; background: #1a1a25; padding: 10px 15px; border-radius: 8px 8px 0 0;">
                    <span><i class="fa-solid fa-box"></i> Inventory</span>
                    <i class="fa-solid fa-sort"></i>
                </div>
                <div style="background: #000; min-height: 200px; display: flex; align-items: center; justify-content: center;">
                    <div class="inventory-empty">
                        <img src="https://cdn-icons-png.flaticon.com/512/7486/7486747.png" alt="Empty">
                        <div>No items yet</div>
                        <div style="font-size: 11px; color: #555; margin-top: 5px; margin-bottom: 15px;">Crack your first node to get items</div>
                        <button class="btn" style="background: var(--primary); color: #000; padding: 8px 20px; border-radius: 6px; font-weight: bold;" onclick="switchTab('cases')">Go to Archives</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <nav class="bottom-nav">
        <div class="nav-item" onclick="switchTab('upgrade')">
            <i class="fa-solid fa-arrow-up-from-bracket nav-icon"></i>
            <div>Augment</div>
        </div>
        <div class="nav-item" onclick="switchTab('crafts')">
            <i class="fa-solid fa-screwdriver-wrench nav-icon"></i>
            <div>Synthesis</div>
        </div>
        <div class="nav-item center-btn" onclick="switchTab('cases')">
            <div class="nav-icon-wrapper">
                <i class="fa-solid fa-cube nav-icon"></i>
            </div>
            <div>Archives</div>
        </div>
        <div class="nav-item" onclick="switchTab('contests')">
            <i class="fa-solid fa-trophy nav-icon"></i>
            <div>Raids</div>
        </div>
        <div class="nav-item" onclick="switchTab('friends')">
            <i class="fa-solid fa-user-group nav-icon"></i>
            <div>Network</div>
        </div>
    </nav>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();
    
    // Set colors for Telegram UI
    tg.setHeaderColor('#13131f');
    tg.setBackgroundColor('#050508');

    // --- NAVIGATION LOGIC ---
    function switchTab(tabName) {
        // Hide all views
        document.querySelectorAll('.content-view').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));

        // Show specific view
        const target = document.getElementById('view-' + tabName);
        if(target) target.classList.add('active');

        // Update Bottom Nav Styling
        // Note: 'profile' doesn't have a bottom nav icon in standard flow, it's accessed via header
        // Mapping tabs to nav indexes:
        const navItems = document.querySelectorAll('.nav-item');
        if (tabName === 'upgrade') navItems[0].classList.add('active');
        if (tabName === 'crafts') navItems[1].classList.add('active');
        if (tabName === 'cases') navItems[2].classList.add('active');
        if (tabName === 'contests') navItems[3].classList.add('active');
        if (tabName === 'friends') navItems[4].classList.add('active');

        // Haptic feedback
        if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
    }

    // --- USER DATA LOGIC ---
    function initUser() {
        const user = tg.initDataUnsafe.user;
        const avatarEl = document.getElementById('header-avatar');
        const avatarBig = document.getElementById('profile-avatar-big');
        const nameEl = document.getElementById('profile-name');
        const idEl = document.getElementById('profile-id');

        if (user) {
            if(user.photo_url) {
                avatarEl.src = user.photo_url;
                avatarBig.src = user.photo_url;
            }
            nameEl.innerText = user.first_name + (user.last_name ? ' ' + user.last_name : '');
            idEl.innerText = "ID: " + user.id;
        } else {
            // Demo data
            nameEl.innerText = "Cyber_Drifter";
            idEl.innerText = "ID: 10101010";
        }
    }

    // --- INIT ---
    initUser();

</script>
</body>
</html>
